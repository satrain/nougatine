<?php 
/* Block Name: Testimonials Slider */
$title = get_field('title');
$args = array(
    'post_type'      => 'testimonials',
    'posts_per_page' => -1, // To get all posts
);

$testimonials_query = new WP_Query($args);
if(!empty($block['className'])): $custom_class = $block['className']; else: $custom_class = ''; endif;
?>

<div class="testimonials <?= $custom_class ?>">
    <div class="container">
        <h2 class="hide-mobile"><?= $title ?></h2>
        <h2 class="hide-desktop"><?= $title ?></h2>
        <div class="testimonials-slider">
            <?php 
                if ($testimonials_query->have_posts()) {
                    while ($testimonials_query->have_posts()) {
                        $testimonials_query->the_post();
            ?>
            <div class="card">
                <div>
                    <div class="avatar">
                        <img src="<?php the_field( 'avatar', get_the_ID() ) ?>" alt="Person's image">
                    </div>
                    <div class="content">
                        <p class="name"><?php the_title() ?></p>
                        <span class="review"><?php the_content() ?></span>
                    </div>
                </div>
                <div class="stars">
                    <svg xmlns="http://www.w3.org/2000/svg" width="161" height="29" viewBox="0 0 161 29" fill="none">
                        <path d="M14.0245 1.46353C14.1741 1.00287 14.8259 1.00287 14.9755 1.46353L17.6432 9.67376C17.7101 9.87977 17.9021 10.0193 18.1187 10.0193L26.7515 10.0193C27.2358 10.0193 27.4372 10.6391 27.0454 10.9238L20.0613 15.998C19.8861 16.1253 19.8128 16.351 19.8797 16.557L22.5474 24.7672C22.697 25.2279 22.1698 25.6109 21.7779 25.3262L14.7939 20.252C14.6186 20.1247 14.3814 20.1247 14.2061 20.252L7.22206 25.3262C6.8302 25.6109 6.30297 25.2279 6.45264 24.7672L9.12031 16.557C9.18725 16.351 9.11392 16.1253 8.93867 15.998L1.95463 10.9238C1.56277 10.6391 1.76416 10.0193 2.24852 10.0193L10.8813 10.0193C11.0979 10.0193 11.2899 9.87977 11.3568 9.67376L14.0245 1.46353Z" fill="#FECB48"/>
                        <path d="M47.0245 1.46353C47.1741 1.00287 47.8259 1.00287 47.9755 1.46353L50.6432 9.67376C50.7101 9.87977 50.9021 10.0193 51.1187 10.0193L59.7515 10.0193C60.2358 10.0193 60.4372 10.6391 60.0454 10.9238L53.0613 15.998C52.8861 16.1253 52.8128 16.351 52.8797 16.557L55.5474 24.7672C55.697 25.2279 55.1698 25.6109 54.7779 25.3262L47.7939 20.252C47.6186 20.1247 47.3814 20.1247 47.2061 20.252L40.2221 25.3262C39.8302 25.6109 39.303 25.2279 39.4526 24.7672L42.1203 16.557C42.1872 16.351 42.1139 16.1253 41.9387 15.998L34.9546 10.9238C34.5628 10.6391 34.7642 10.0193 35.2485 10.0193L43.8813 10.0193C44.0979 10.0193 44.2899 9.87977 44.3568 9.67376L47.0245 1.46353Z" fill="#FECB48"/>
                        <path d="M80.0245 1.46353C80.1741 1.00287 80.8259 1.00287 80.9755 1.46353L83.6432 9.67376C83.7101 9.87977 83.9021 10.0193 84.1187 10.0193L92.7515 10.0193C93.2358 10.0193 93.4372 10.6391 93.0454 10.9238L86.0613 15.998C85.8861 16.1253 85.8128 16.351 85.8797 16.557L88.5474 24.7672C88.697 25.2279 88.1698 25.6109 87.7779 25.3262L80.7939 20.252C80.6186 20.1247 80.3814 20.1247 80.2061 20.252L73.2221 25.3262C72.8302 25.6109 72.303 25.2279 72.4526 24.7672L75.1203 16.557C75.1872 16.351 75.1139 16.1253 74.9387 15.998L67.9546 10.9238C67.5628 10.6391 67.7642 10.0193 68.2485 10.0193L76.8813 10.0193C77.0979 10.0193 77.2899 9.87977 77.3568 9.67376L80.0245 1.46353Z" fill="#FECB48"/>
                        <path d="M113.024 1.46353C113.174 1.00287 113.826 1.00287 113.976 1.46353L116.643 9.67376C116.71 9.87977 116.902 10.0193 117.119 10.0193L125.751 10.0193C126.236 10.0193 126.437 10.6391 126.045 10.9238L119.061 15.998C118.886 16.1253 118.813 16.351 118.88 16.557L121.547 24.7672C121.697 25.2279 121.17 25.6109 120.778 25.3262L113.794 20.252C113.619 20.1247 113.381 20.1247 113.206 20.252L106.222 25.3262C105.83 25.6109 105.303 25.2279 105.453 24.7672L108.12 16.557C108.187 16.351 108.114 16.1253 107.939 15.998L100.955 10.9238C100.563 10.6391 100.764 10.0193 101.249 10.0193L109.881 10.0193C110.098 10.0193 110.29 9.87977 110.357 9.67376L113.024 1.46353Z" fill="#FECB48"/>
                        <path d="M146.024 1.46353C146.174 1.00287 146.826 1.00287 146.976 1.46353L149.643 9.67376C149.71 9.87977 149.902 10.0193 150.119 10.0193L158.751 10.0193C159.236 10.0193 159.437 10.6391 159.045 10.9238L152.061 15.998C151.886 16.1253 151.813 16.351 151.88 16.557L154.547 24.7672C154.697 25.2279 154.17 25.6109 153.778 25.3262L146.794 20.252C146.619 20.1247 146.381 20.1247 146.206 20.252L139.222 25.3262C138.83 25.6109 138.303 25.2279 138.453 24.7672L141.12 16.557C141.187 16.351 141.114 16.1253 140.939 15.998L133.955 10.9238C133.563 10.6391 133.764 10.0193 134.249 10.0193L142.881 10.0193C143.098 10.0193 143.29 9.87977 143.357 9.67376L146.024 1.46353Z" fill="#FECB48"/>
                    </svg>
                </div>
            </div>
            <?php 
            
                    }

                    wp_reset_postdata();
                }
            
            ?>
        </div>
    </div>
</div>
