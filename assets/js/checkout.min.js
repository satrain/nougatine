jQuery(document).ready(function(o){o(document).on("change",".step-content.active  input.required, .step-content.active  select.required",function(){var e=document.querySelector(".step-content.active .btn-continue"),t=!0;o(".step-content.active  input.required, .step-content.active  select.required").each(function(){""===o(this).val()&&(t=!1)}),t&&e.classList.add("active")});var t=document.querySelectorAll(".btn-continue");function i(e){var t,i,n,r;3!=e&&(t=o(".step-"+e),i=!0,n=(t=t).find('input[name="choose_delivery"]:checked').val(),t[0].classList.contains("step-1")?"pickup"===n?t.find('input[name^="pickup_"], select[name^="pickup_"]').each(function(e,t){o(this).val()?o(this).removeClass("input-error"):(i=!1,o(this).addClass("input-error"))}):t.find('input[name^="shipping_"], select[name^="shipping_"]').each(function(e,t){o(this).val()?o(this).removeClass("input-error"):(i=!1,o(this).addClass("input-error"))}):t[0].querySelectorAll(".validate-required").forEach(function(e,t){e.querySelectorAll("input, select").forEach(function(e,t){jQuery("#ship-to-different-address-checkbox").is(":checked")?document.querySelectorAll(".woocommerce-shipping-fields__field-wrapper .validate-required").forEach(function(e,t){e.querySelectorAll("input, select").forEach(function(e,t){e.value?e.classList.remove("input-error"):(i=!1,e.classList.add("input-error"))})}):document.querySelectorAll(".woocommerce-billing-fields .validate-required").forEach(function(e,t){e.querySelectorAll("input, select").forEach(function(e,t){e.value?e.classList.remove("input-error"):(i=!1,e.classList.add("input-error"))})})})}),i?(r=e+1,o(".step").removeClass("current").filter(function(){return o(this).data("step")===r}).addClass("active current"),o(".step-content").removeClass("active"),o(".step-"+r).addClass("active")):((n=document.createElement("div")).classList.add("form-error-message"),document.querySelector("body").classList.contains("lang-he")?n.innerHTML="אנא מלא את כל השדות הדרושים.":n.innerHTML="Please fill out all required fields.",document.querySelector("body").appendChild(n),setTimeout(function(){document.querySelector(".form-error-message").remove()},3500)))}for(let e=0;e<t.length;e++)t[e].addEventListener("click",()=>{i(parseInt(o(".step.current").data("step"),10))});let e=document.querySelector(".delivery"),n=document.querySelector(".collect-in-store"),r=document.querySelector(".delivery-form"),a=document.querySelector(".collect-in-store-form"),s=(e&&e.addEventListener("click",()=>{e.classList.contains("active")||(n.classList.remove("active"),e.classList.add("active")),r.classList.contains("active")||(a.classList.remove("active"),r.classList.add("active"))}),n&&n.addEventListener("click",()=>{n.classList.contains("active")||(e.classList.remove("active"),n.classList.add("active")),a.classList.contains("active")||(r.classList.remove("active"),a.classList.add("active"))}),document.querySelector(".different-name-invoice")),c=document.querySelector(".billing-info-form"),l=(s&&s.addEventListener("click",()=>{document.querySelector(".step-content.active .btn-continue");s.classList.contains("active")?s.classList.remove("active"):s.classList.add("active"),c.classList.contains("active")?c.classList.remove("active"):c.classList.add("active")}),document.querySelectorAll(".order-summary-btn-mobile")),u=document.querySelectorAll(".order-summary-mobile");if(l)for(let e=0;e<l.length;e++)l[e].addEventListener("click",()=>{u[e].querySelector(".products-list").classList.toggle("active"),u[e].querySelector(".edit-order").classList.toggle("active"),l[e].classList.toggle("active")});document.addEventListener("click",function(e){e.target.classList.contains("btn-see-whole-order")&&(e.preventDefault(),document.querySelector(".list").classList.remove("load_items"),e.target.remove())});for(var d,m,p=pickersTime.startTime,y=pickersTime.endTime,f=pickersTime.interval,v=[],g=moment(p,"HH:mm"),h=moment(y,"HH:mm");g.isBefore(h);){var D=moment(g).add(f,"minutes");D.isAfter(h)&&(D=h),v.push(g.format("HH:mm")+" - "+D.format("HH:mm")),g.add(f,"minutes")}for(d in v)v.hasOwnProperty(d)&&((m=jQuery("<button />").text(v[d])).on("click",function(){jQuery("#shipping_time").val(jQuery(this).text()),jQuery("#pickup_time").val(jQuery(this).text()),jQuery("#timeslots").dialog("close")}),jQuery("#timeslots").append(m));jQuery("#timeslots").dialog({autoOpen:!1,modal:!0,buttons:{},open:function(e,t){jQuery(".ui-widget-overlay").on("click",function(){jQuery("#timeslots").dialog("close")})}}),jQuery("#shipping_time").on("click",function(){jQuery("#timeslots").dialog("open")}),jQuery("#pickup_time").on("click",function(){jQuery("#timeslots").dialog("open")});var L,k,S,j,Q=pickersDate.disabledDates.map(function(e){return moment(e,"DD.MM.YYYY").toDate()}),p=Array.from(document.body.classList).includes("lang-he"),y=["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],q=(L=p?new Pikaday({field:document.getElementById("datepicker"),format:"DD.MM.YYYY",minDate:new Date,i18n:{previousMonth:"החודש הקודם",nextMonth:"החודש הבא",months:y,weekdays:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת"],weekdaysShort:["א","ב","ג","ד","ה","ו","ש"]},disableDayOfWeek:[6],disableDayFn:function(t){var e=new Date;return e.setHours(0,0,0,0),t.getTime()===e.getTime()||6===t.getDay()||Q.some(function(e){return moment(t).isSame(e,"day")})},onSelect:function(){jQuery("#shipping_date").val(this.toString()),jQuery("#pickup_date").val(this.toString()),jQuery("#dateslot").dialog("close")}}):new Pikaday({field:document.getElementById("datepicker"),format:"DD.MM.YYYY",minDate:new Date,disableDayOfWeek:[6],disableDayFn:function(t){var e=new Date;return e.setHours(0,0,0,0),t.getTime()===e.getTime()||6===t.getDay()||Q.some(function(e){return moment(t).isSame(e,"day")})},onSelect:function(){jQuery("#shipping_date").val(this.toString()),jQuery("#pickup_date").val(this.toString()),jQuery("#dateslot").dialog("close")}}),jQuery("#dateslot").dialog({autoOpen:!1,modal:!0,dialogClass:"dateslot-dialog",open:function(){L.show(),jQuery(".ui-widget-overlay").on("click",function(){jQuery("#dateslot").dialog("close")})},close:function(){L.hide()}}),jQuery("#shipping_date").on("click",function(){jQuery("#dateslot").dialog("open")}),jQuery("#pickup_date").on("click",function(){jQuery("#dateslot").dialog("open")}),new Pikaday({field:document.getElementById("deliveryDate_pdf_export"),format:"DD.MM.YYYY",minDate:new Date,disableDayOfWeek:[6],autoClose:!0,disableDayFn:function(t){var e=new Date;return e.setHours(0,0,0,0),t.getTime()===e.getTime()||6===t.getDay()||Q.some(function(e){return moment(t).isSame(e,"day")})},onSelect:function(){jQuery("#deliveryDate_pdf_export").val(this.toString()),jQuery("#deliveryDate_pdf_export").trigger("input"),q.hide(0)}}));function w(){j.every(function(e){return""!==e.value})?(S.disabled=!1,S.classList.add("active")):(S.disabled=!0,S.classList.remove("active"))}q=p?new Pikaday({field:document.getElementById("deliveryDate_pdf_export"),format:"DD.MM.YYYY",minDate:new Date,disableDayOfWeek:[6],autoClose:!0,i18n:{previousMonth:"החודש הקודם",nextMonth:"החודש הבא",months:y,weekdays:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת"],weekdaysShort:["א","ב","ג","ד","ה","ו","ש"]},disableDayFn:function(t){var e=new Date;return e.setHours(0,0,0,0),t.getTime()===e.getTime()||6===t.getDay()||Q.some(function(e){return moment(t).isSame(e,"day")})},onSelect:function(){jQuery("#deliveryDate_pdf_export").val(this.toString()),jQuery("#deliveryDate_pdf_export").trigger("input"),q.hide(0)}}):new Pikaday({field:document.getElementById("deliveryDate_pdf_export"),format:"DD.MM.YYYY",minDate:new Date,disableDayOfWeek:[6],autoClose:!0,disableDayFn:function(t){var e=new Date;return e.setHours(0,0,0,0),t.getTime()===e.getTime()||6===t.getDay()||Q.some(function(e){return moment(t).isSame(e,"day")})},onSelect:function(){jQuery("#deliveryDate_pdf_export").val(this.toString()),jQuery("#deliveryDate_pdf_export").trigger("input"),q.hide(0)}}),jQuery(".export-btn").on("click",function(e){e.preventDefault(),jQuery("#export-popup").show()}),jQuery(".get_pdf").on("click",function(e){var t=new URL(jQuery(this).data("pdf"));jQuery("#export-popup :input").each(function(){jQuery(this).val()&&t.searchParams.append(jQuery(this).attr("name"),jQuery(this).val())}),jQuery(this).attr("data-pdf",t.toString()),window.location.href=t.toString()}),0<jQuery("body.woocommerce-cart").length&&(k=document.getElementById("export-popup"),S=k.querySelector("button"),j=Array.from(k.querySelectorAll("input[required]")),Array.from(k.querySelectorAll("input")).forEach(function(e){e.addEventListener("input",w)}),window.addEventListener("click",function(e){e.target==k&&(k.style.display="none")}),window.addEventListener("keydown",function(e){"Escape"===e.key&&(k.style.display="none")})),document.addEventListener("click",function(e){e.target.closest(".step")&&(document.querySelectorAll(".step").forEach(function(e,t){e.classList.remove("active"),e.classList.remove("current")}),e.target.closest(".step").classList.add("active"),e.target.closest(".step").classList.add("current"),e=e.target.closest(".step").dataset.step,document.querySelectorAll(".step-content").forEach(function(e,t){e.classList.remove("active")}),document.querySelector(".step-"+e).classList.add("active"))})});